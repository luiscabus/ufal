<!DOCTYPE html>
<html>
<head>
	<title>Tarefa de Sala</title>
	<script>
		function novojogo() {

			var alunos = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"];

			var htmlcontent = "";

			var i;
			for (i = 0; i < alunos.length; i++) {
				htmlcontent += "<div class='onefourth' id='a-"+alunos[i]+"'><p>Aluno: " + alunos[i] + "</p>";

				// var desafio = ["2 x 1", "2 x 2", "2 x 3", "2 x 4", "2 x 5", "2 x 6", "2 x 7", "2 x 8", "2 x 9", "2 x 10"];
				// var respostas = ["2", "4", "6", "8", "10", "12", "14", "16", "18", "20"];
				var desafio = [];
				var respostas = [];

				var k, m1, m2, rr;
				for (k = 0; k < 10; k++) {
					m1 = Math.floor((Math.random() * 10) + 1);
					m2 = Math.floor((Math.random() * 10) + 1);
					rr = m1 * m2;
					desafio.push(m1 + " x " + m2); 
					respostas.push(rr);
				}

				var j;
				for (j = 0; j < desafio.length; j++) { 
					htmlcontent += "<div>" + desafio[j] + " = <input type='text' id='a"+alunos[i]+"d"+j+"' data-resposta='"+respostas[j]+"' >" + "</div>";
				}

				htmlcontent += "</div>"
			}

			document.getElementById('desafio').innerHTML = htmlcontent;
		}

		function avaliar() {
			var alunos = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"];

			var htmlcontent = "";

			var media = 0;

			var i; 
			for (i = 0; i < alunos.length; i++) {
				htmlcontent += "<div class='onefourth' id='R-a-"+alunos[i]+"'><p><b>Aluno " + alunos[i] + ":</b></p>";

				var acertos = 0; 

				var j;
				for (j = 0; j < 10; j++) { 
					var desafio = document.getElementById("a"+alunos[i]+"d"+j);
					var rcorreta = desafio.dataset.resposta;
					var rtentada = document.getElementById("a"+alunos[i]+"d"+j).value;

					if (rtentada == rcorreta) {
						// htmlcontent += "Acertou a a"+alunos[i]+"d"+j+". ";
						acertos += 1;
					}
				}

				htmlcontent += "Acertou "+acertos+" questões. ";

				if (acertos >= 9) {
					htmlcontent += "Bravo você é quase um mestre em tabuada de multiplicar";
				}
				if (acertos >=7 && acertos < 9) {
					htmlcontent += "O teu desempenho está muito bom";
				}
				if (acertos < 7) {
					htmlcontent += "Seria muito proveitoso jogar novamente conosco!";
				}


				htmlcontent += "</div>"

				media += acertos;
			}

			htmlcontent += "<h2>Média da turma: "+parseFloat(media / 20)+"</h2>"
			document.getElementById('resultado').innerHTML = htmlcontent;
		}
	</script>
	<style type="text/css">
		html {background-color:lightgrey}
		body {width:960px; margin: 0 auto;}
		button {font-size:18px;padding:15px 40px;background-color:red;color:#FFF;border-radius:5px;}

		.onefourth{width:25%; float: left; margin:20px 0;}

		#resultado {min-height:300px;}
	</style>
</head>
<body>
	<h1>Jogo de Tabuada</h1>
	<h2>Clique em "Novo jogo" para gerar seu desafio:</h2>

	<button onclick="novojogo();">Novo jogo</button>

	<div id="tabuada">
		<h3>O último a preencher os resultados deve clicar em "Avaliar!".</h3>

		<div id="desafio">
			
		</div>
	
		<button onclick="avaliar();">Avaliar!</button>	
	</div>

	

	<div id="resultado">
		
	</div>
</body>
</html>